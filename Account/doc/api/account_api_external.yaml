swagger: '2.0'

info:
  title: 'Digital Health Revolution - MyData Account'
  description:
    ' #### MyData-SDK - MyData Account API - External '
  version: '1.3'
  contact:
    url: 'https://github.com/HIIT/mydata-stack'
  license:
    name: 'MIT License (MIT)'
    url: 'https://opensource.org/licenses/MIT'

schemes:
  - https

basePath: '/account/api/v1.3/external/'

consumes:
  - application/json

produces:
  - application/json

securityDefinitions:
  externalApiKeyAuth:
    type: apiKey
    name: Api-Key-User
    in: header
    description: Authentication using apiKey for external use

  BasicAuth:
    type: basic
    description: HTTP Basic Auth

externalDocs:
  description: 'External documentation'
  url: 'https://github.com/HIIT/mydata-stack'

paths:

  /auth/user/:
    get:
      security:
        - BasicAuth: []
      summary: 'Get ApiKey for account'

      tags:
        - Auth

      responses:
        '200':
          description: ApiKey for authenticated user
          schema:
            $ref: '#/definitions/apiKeyResponse'
        '400':
          description: Bad Request
          schema:
            $ref: '#/definitions/errors'
        '401':
          description: Unauthorized
          schema:
            $ref: '#/definitions/errors'
        '403':
          description: Forbidden
          schema:
            $ref: '#/definitions/errors'
        '500':
          description: Internal Server error
          schema:
            $ref: '#/definitions/errors'


  /accounts/:
    post:
      summary: 'Create new MyData Account'

      parameters:
        - name: newAccount
          in: body
          description: 'Base information for account'
          required: true
          schema:
            $ref: '#/definitions/newAccountRequest'

      tags:
        - Account

      responses:
        '201':
          description: Account created
          schema:
            $ref: '#/definitions/newAccountResponse'
        '400':
          description: Bad Request
          schema:
            $ref: '#/definitions/errors'
        '401':
          description: Unauthorized
          schema:
            $ref: '#/definitions/errors'
        '403':
          description: Forbidden
          schema:
            $ref: '#/definitions/errors'
        '500':
          description: Internal Server errors
          schema:
            $ref: '#/definitions/errors'
        '503':
          description: Service Unavailable
          schema:
            $ref: '#/definitions/errors'


  /accounts/{account_id}/:
    get:
      security:
        - externalApiKeyAuth: []
      summary: 'Fetch MyData Account by ID'

      parameters:
        - name: account_id
          in: path
          type: integer
          description: 'Account ID'
          required: true

      tags:
        - Account

      responses:
        '200':
          description: Account fetched
          schema:
            $ref: '#/definitions/accountResponse'
        '204':
          description: No Account with given id
        '400':
          description: Bad Request
          schema:
            $ref: '#/definitions/errors'
        '401':
          description: Unauthorized
          schema:
            $ref: '#/definitions/errors'
        '403':
          description: Forbidden
          schema:
            $ref: '#/definitions/errors'
        '500':
          description: Internal Server errors
          schema:
            $ref: '#/definitions/errors'
        '503':
          description: Service Unavailable
          schema:
            $ref: '#/definitions/errors'
    delete:
      security:
        - externalApiKeyAuth: []
      summary: 'Remove MyData Account by ID'

      parameters:
        - name: account_id
          in: path
          type: integer
          description: 'Account ID'
          required: true

      tags:
        - Account

      responses:
        '204':
          description: Account deleted
        '401':
          description: Unauthorized
          schema:
            $ref: '#/definitions/errors'
        '403':
          description: Forbidden
          schema:
            $ref: '#/definitions/errors'
        '500':
          description: Internal Server errors
          schema:
            $ref: '#/definitions/errors'


  /accounts/{account_id}/export/:
    get:
      security:
        - externalApiKeyAuth: []
      summary: 'Export MyData Account'

      parameters:
        - name: account_id
          in: path
          type: integer
          description: 'Account ID'
          required: true

      tags:
        - Account

      responses:
        '200':
          description: Account exported
          schema:
            $ref: '#/definitions/accountResponse'
        '204':
          description: No Account with given id
        '400':
          description: Bad Request
          schema:
            $ref: '#/definitions/errors'
        '401':
          description: Unauthorized
          schema:
            $ref: '#/definitions/errors'
        '403':
          description: Forbidden
          schema:
            $ref: '#/definitions/errors'
        '500':
          description: Internal Server errors
          schema:
            $ref: '#/definitions/errors'
        '503':
          description: Service Unavailable
          schema:
            $ref: '#/definitions/errors'


  /accounts/{account_id}/info/:
    get:
      security:
        - externalApiKeyAuth: []
      description: 'Fetch Account Info Object'

      parameters:
        - name: account_id
          in: path
          type: integer
          description: 'Account ID'
          required: true

      tags:
        - Info

      responses:
        '200':
          description: Account Info fetched
          schema:
            $ref: '#/definitions/AccountInfoResponseArray'
        '204':
          description: No content with given id
        '400':
          description: Bad Request
          schema:
            $ref: '#/definitions/errors'
        '401':
          description: Unauthorized
          schema:
            $ref: '#/definitions/errors'
        '403':
          description: Forbidden
          schema:
            $ref: '#/definitions/errors'
        '500':
          description: Internal Server errors
          schema:
            $ref: '#/definitions/errors'
        '503':
          description: Service Unavailable
          schema:
            $ref: '#/definitions/errors'


  /accounts/{account_id}/info/{info_id}/:
    get:
      security:
        - externalApiKeyAuth: []
      description: 'Fetch Account info object by ID'

      parameters:
        - name: account_id
          in: path
          type: integer
          description: 'Account ID'
          required: true
        - name: info_id
          in: path
          type: integer
          description: 'Account Info ID'
          required: true

      tags:
        - Info

      responses:
        '200':
          description: Account info fetched
          schema:
            $ref: '#/definitions/AccountInfoResponse'
        '204':
          description: No content with given id
        '400':
          description: Bad Request
          schema:
            $ref: '#/definitions/errors'
        '401':
          description: Unauthorized
          schema:
            $ref: '#/definitions/errors'
        '403':
          description: Forbidden
          schema:
            $ref: '#/definitions/errors'
        '500':
          description: Internal Server errors
          schema:
            $ref: '#/definitions/errors'
        '503':
          description: Service Unavailable
          schema:
            $ref: '#/definitions/errors'

    patch:
      security:
        - externalApiKeyAuth: []
      description: 'Update particulars'

      parameters:
        - name: account_id
          in: path
          type: integer
          description: 'Account ID'
          required: true
        - name: info_id
          in: path
          type: integer
          description: 'Account Info ID'
          required: true
        - name: payload
          in: body
          description: 'Resource content'
          required: true
          schema:
            $ref: '#/definitions/AccountInfoRequest'

      tags:
        - Info

      responses:
        '200':
          description: Account Info updated
          schema:
            $ref: '#/definitions/AccountInfoResponse'
        '204':
          description: No content with given id
        '400':
          description: Bad Request
          schema:
            $ref: '#/definitions/errors'
        '401':
          description: Unauthorized
          schema:
            $ref: '#/definitions/errors'
        '403':
          description: Forbidden
          schema:
            $ref: '#/definitions/errors'
        '500':
          description: Internal Server errors
          schema:
            $ref: '#/definitions/errors'
        '503':
          description: Service Unavailable
          schema:
            $ref: '#/definitions/errors'




  /accounts/{account_id}/logs/events/:
    get:
      security:
        - externalApiKeyAuth: []
      description: 'Fetch Event logs for Account'

      parameters:
        - name: account_id
          in: path
          type: integer
          description: 'Account ID'
          required: true

      tags:
        - Event Log

      responses:
        '200':
          description: Event logs fetched
          schema:
            $ref: '#/definitions/EventLogArray'
        '400':
          description: Bad Request
          schema:
            $ref: '#/definitions/errors'
        '401':
          description: Unauthorized
          schema:
            $ref: '#/definitions/errors'
        '403':
          description: Forbidden
          schema:
            $ref: '#/definitions/errors'
        '404':
          description: No content
          schema:
            $ref: '#/definitions/errors'
        '500':
          description: Internal Server errors
          schema:
            $ref: '#/definitions/errors'
        '503':
          description: Service Unavailable
          schema:
            $ref: '#/definitions/errors'


  /accounts/{account_id}/servicelinks/:
    get:
      security:
        - externalApiKeyAuth: []
      description: 'Fetch list of Service links related to Account'

      parameters:
        - name: account_id
          in: path
          type: integer
          description: 'Account ID'
          required: true

      tags:
        - MyData Service Link

      responses:
        '200':
          description: Service link fetched
          schema:
            $ref: '#/definitions/serviceLinksResponse'
        '204':
          description: No content with given id
        '400':
          description: Bad Request
          schema:
            $ref: '#/definitions/errors'
        '401':
          description: Unauthorized
          schema:
            $ref: '#/definitions/errors'
        '403':
          description: Forbidden
          schema:
            $ref: '#/definitions/errors'
        '500':
          description: Internal Server errors
          schema:
            $ref: '#/definitions/errors'
        '503':
          description: Service Unavailable
          schema:
            $ref: '#/definitions/errors'


  /accounts/{account_id}/servicelinks/{servicelink_id}/:
    get:
      security:
        - externalApiKeyAuth: []
      description: 'Fetch Service Link by ID'

      parameters:
        - name: account_id
          in: path
          type: integer
          description: 'Account ID'
          required: true
        - name: servicelink_id
          in: path
          type: integer
          description: 'Service link ID'
          required: true

      tags:
        - MyData Service Link

      responses:
        '200':
          description: Service link fetched
          schema:
            $ref: '#/definitions/serviceLinkResponse'
        '204':
          description: No content with given id
        '400':
          description: Bad Request
          schema:
            $ref: '#/definitions/errors'
        '401':
          description: Unauthorized
          schema:
            $ref: '#/definitions/errors'
        '403':
          description: Forbidden
          schema:
            $ref: '#/definitions/errors'
        '500':
          description: Internal Server errors
          schema:
            $ref: '#/definitions/errors'
        '503':
          description: Service Unavailable
          schema:
            $ref: '#/definitions/errors'


  /accounts/{account_id}/servicelinks/{servicelink_id}/statuses/:
    get:
      security:
        - externalApiKeyAuth: []
      description: 'Fetch list of Service Link statuses'

      parameters:
        - name: account_id
          in: path
          type: integer
          description: 'Account ID'
          required: true
        - name: servicelink_id
          in: path
          type: integer
          description: 'Service link ID'
          required: true

      tags:
        - MyData Service Link

      responses:
        '200':
          description: List of Service Link statuses fetched
          schema:
            $ref: '#/definitions/serviceLinkStatusesResponse'
        '204':
          description: No content with given id
        '400':
          description: Bad Request
          schema:
            $ref: '#/definitions/errors'
        '401':
          description: Unauthorized
          schema:
            $ref: '#/definitions/errors'
        '403':
          description: Forbidden
          schema:
            $ref: '#/definitions/errors'
        '500':
          description: Internal Server errors
          schema:
            $ref: '#/definitions/errors'
        '503':
          description: Service Unavailable
          schema:
            $ref: '#/definitions/errors'


  /accounts/{account_id}/servicelinks/{servicelink_id}/statuses/{status_id}/:
    get:
      security:
        - externalApiKeyAuth: []
      description: 'Fetch Service Link status by ID'

      parameters:
        - name: account_id
          in: path
          type: integer
          description: 'Account ID'
          required: true
        - name: servicelink_id
          in: path
          type: integer
          description: 'Service link ID'
          required: true
        - name: status_id
          in: path
          type: integer
          description: 'Service link status ID'
          required: true

      tags:
        - MyData Service Link

      responses:
        '200':
          description: Service link status fetched
          schema:
            $ref: '#/definitions/serviceLinkStatusResponse'
        '204':
          description: No content with given id
        '400':
          description: Bad Request
          schema:
            $ref: '#/definitions/errors'
        '401':
          description: Unauthorized
          schema:
            $ref: '#/definitions/errors'
        '403':
          description: Forbidden
          schema:
            $ref: '#/definitions/errors'
        '500':
          description: Internal Server errors
          schema:
            $ref: '#/definitions/errors'
        '503':
          description: Service Unavailable
          schema:
            $ref: '#/definitions/errors'


  /accounts/{account_id}/servicelinks/{link_id}/statuses/last/:
    get:
      security:
        - externalApiKeyAuth: []
      summary: 'Get last Service Link Status Record'
      description: "Fetch last Service Link Status Record"

      parameters:
        - name: account_id
          in: path
          type: string
          description: 'Account ID'
          required: true
        - name: link_id
          in: path
          type: string
          description: 'Service Link ID'
          required: true

      tags:
        - MyData Service Link

      responses:
        '200':
          description: 'Service Link Status Record'
          schema:
            $ref: '#/definitions/serviceLinkStatusResponse'
        '400':
          description: 'Bad Request'
          schema:
            $ref: '#/definitions/errors'
        '404':
          description: 'No Service Link with provided ID'
          schema:
            $ref: '#/definitions/errors'
        '500':
          description: 'General Error'
          schema:
            $ref: '#/definitions/errors'


  /accounts/{account_id}/servicelinks/{servicelink_id}/consents/:
    get:
      security:
        - externalApiKeyAuth: []
      description: 'Fetch list of Consents related to servicelink'

      parameters:
        - name: account_id
          in: path
          type: integer
          description: 'Account ID'
          required: true
        - name: servicelink_id
          in: path
          type: integer
          description: 'Service link ID'
          required: true
        - name: get_consent_pair
          in: query
          type: boolean
          description: "If true also Consent pairs will be fetched"
          required: false

      tags:
        - MyData Consent

      responses:
        '200':
          description: List of Consents related to servicelink fetched
          schema:
            $ref: '#/definitions/consentsResponse'
        '204':
          description: No content with given id
        '400':
          description: Bad Request
          schema:
            $ref: '#/definitions/errors'
        '401':
          description: Unauthorized
          schema:
            $ref: '#/definitions/errors'
        '403':
          description: Forbidden
          schema:
            $ref: '#/definitions/errors'
        '500':
          description: Internal Server errors
          schema:
            $ref: '#/definitions/errors'
        '503':
          description: Service Unavailable
          schema:
            $ref: '#/definitions/errors'


  /accounts/{account_id}/servicelinks/{servicelink_id}/consents/{consent_id}/:
    get:
      security:
        - externalApiKeyAuth: []
      description: 'Fetch Consent by ID'

      parameters:
        - name: account_id
          in: path
          type: integer
          description: 'Account ID'
          required: true
        - name: servicelink_id
          in: path
          type: integer
          description: 'Service link ID'
          required: true
        - name: consent_id
          in: path
          type: integer
          description: 'Consent ID'
          required: true
        - name: get_consent_pair
          in: query
          type: boolean
          description: "If true also Consent pairs will be fetched"
          required: false

      tags:
        - MyData Consent

      responses:
        '200':
          description: Consent fetched
          schema:
            $ref: '#/definitions/consentsResponse'
        '204':
          description: No content with given id
        '400':
          description: Bad Request
          schema:
            $ref: '#/definitions/errors'
        '401':
          description: Unauthorized
          schema:
            $ref: '#/definitions/errors'
        '403':
          description: Forbidden
          schema:
            $ref: '#/definitions/errors'
        '500':
          description: Internal Server errors
          schema:
            $ref: '#/definitions/errors'
        '503':
          description: Service Unavailable
          schema:
            $ref: '#/definitions/errors'


  /accounts/{account_id}/servicelinks/{link_id}/consents/last/:
    get:
      security:
        - externalApiKeyAuth: []
      summary: 'Get Last Consent Record'
      description: "Fetch Last Consent Record related to Service Link Record"

      parameters:
        - name: account_id
          in: path
          type: string
          description: 'Account ID'
          required: true
        - name: link_id
          in: path
          type: string
          description: 'Service Link ID'
          required: true
        - name: get_consent_pair
          in: query
          type: boolean
          description: "If true also Consent pairs will be fetched"
          required: false

      tags:
        - MyData Consent

      responses:
        '200':
          description: 'Array of Consent Records'
          schema:
            $ref: '#/definitions/consentsResponse'
        '400':
          description: 'Bad Request'
          schema:
            $ref: '#/definitions/errors'
        '404':
          description: 'No Service Link with provided ID'
          schema:
            $ref: '#/definitions/errors'
        '500':
          description: 'General Error'
          schema:
            $ref: '#/definitions/errors'


  /accounts/{account_id}/servicelinks/{servicelink_id}/consents/{consent_id}/statuses/:
    get:
      security:
        - externalApiKeyAuth: []
      description: 'Fetch list of Consent statuses'

      parameters:
        - name: account_id
          in: path
          type: integer
          description: 'Account ID'
          required: true
        - name: servicelink_id
          in: path
          type: integer
          description: 'Service link ID'
          required: true
        - name: consent_id
          in: path
          type: integer
          description: 'Consent ID'
          required: true
        - name: status_id
          in: query
          type: string
          description: "Last valid Consent Status Record ID"
          required: false

      tags:
        - MyData Consent

      responses:
        '200':
          description: List of Consent statuses fetched
          schema:
            $ref: '#/definitions/consentStatusesResponse'
        '204':
          description: No content with given id
        '400':
          description: Bad Request
          schema:
            $ref: '#/definitions/errors'
        '401':
          description: Unauthorized
          schema:
            $ref: '#/definitions/errors'
        '403':
          description: Forbidden
          schema:
            $ref: '#/definitions/errors'
        '500':
          description: Internal Server errors
          schema:
            $ref: '#/definitions/errors'
        '503':
          description: Service Unavailable
          schema:
            $ref: '#/definitions/errors'


  /accounts/{account_id}/servicelinks/{servicelink_id}/consents/{consent_id}/statuses/{status_id}/:
    get:
      security:
        - externalApiKeyAuth: []
      description: 'Fetch Consent by ID'

      parameters:
        - name: account_id
          in: path
          type: integer
          description: 'Account ID'
          required: true
        - name: servicelink_id
          in: path
          type: integer
          description: 'Service link ID'
          required: true
        - name: consent_id
          in: path
          type: integer
          description: 'Consent ID'
          required: true
        - name: status_id
          in: path
          type: integer
          description: 'Status ID'
          required: true

      tags:
        - MyData Consent

      responses:
        '200':
          description: Consent fetched
          schema:
            $ref: '#/definitions/consentStatusResponse'
        '204':
          description: No content with given id
        '400':
          description: Bad Request
          schema:
            $ref: '#/definitions/errors'
        '401':
          description: Unauthorized
          schema:
            $ref: '#/definitions/errors'
        '403':
          description: Forbidden
          schema:
            $ref: '#/definitions/errors'
        '500':
          description: Internal Server errors
          schema:
            $ref: '#/definitions/errors'
        '503':
          description: Service Unavailable
          schema:
            $ref: '#/definitions/errors'


  /accounts/{account_id}/servicelinks/{link_id}/consents/{consent_id}/statuses/last/:
    get:
      security:
        - externalApiKeyAuth: []
      summary: 'Get last Consent Status Record'
      description: "Fetch last Consent Status Record"

      parameters:
        - name: account_id
          in: path
          type: string
          description: 'Account ID'
          required: true
        - name: link_id
          in: path
          type: string
          description: 'Service Link ID'
          required: true
        - name: consent_id
          in: path
          type: string
          description: 'Consent ID'
          required: true

      tags:
        - MyData Consent

      responses:
        '200':
          description: 'Consent Status Record'
          schema:
            $ref: '#/definitions/consentStatusResponse'
        '400':
          description: 'Bad Request'
          schema:
            $ref: '#/definitions/errors'
        '404':
          description: 'No entry with provided ID'
          schema:
            $ref: '#/definitions/errors'
        '500':
          description: 'General Error'
          schema:
            $ref: '#/definitions/errors'



definitions:

  errors:
    type: object
    properties:
      status:
        type: string
        description: HTTP status code as string value.
      code:
        type: integer
        description: HTTP status code
      title:
        type: string
        description: Title of error message.
      detail:
        type: string
        description: Detailed error message.
      source:
        type: string
        description: Source URI

  apiKeyResponse:
    type: object
    properties:
      Api-Key:
        type: string
        description: ApiKey
      account_id:
        type: string
        description: Account ID

  newAccount:
    type: object
    properties:
      type:
        type: string
        description: Resource type 'Account'
      attributes:
        type: object
        properties:
          username:
            type: string
            description: Account username
            maxLength: 255
          password:
            type: string
            format: password
            description: Account password
            maxLength: 255
            minLength: 8
          firstname:
            type: string
            description: User's first name
            maxLength: 255
          lastname:
            type: string
            description: User's last name
            maxLength: 255

  createdAccount:
    type: object
    properties:
      type:
        type: string
        description: Resource type 'Account'
      id:
        type: string
        description: Account ID
      attributes:
        type: object
        properties:
          activated:
            type: integer

  account:
    type: object
    properties:
      type:
        type: string
        description: Resource type 'Account'
      id:
        type: string
        description: Account ID
      attributes:
        type: object

  AccountInfo:
    type: object
    description: "Account info"
    properties:
      type:
        type: string
        description: Resource type 'AccountInfo'
      id:
        type: string
        description: AccountInfo ID
      attributes:
        type: object
        properties:
          firstname:
            type: string
            description: First name
          lastname:
            type: string
            description: Last name
          avatar:
            type: string
            description: 'Base64 avatar image'

  newAccountRequest:
    type: object
    properties:
      data:
        $ref: '#/definitions/newAccount'

  newAccountResponse:
    type: object
    properties:
      data:
        $ref: '#/definitions/createdAccount'

  accountResponse:
    type: object
    properties:
      data:
        $ref: '#/definitions/account'


  AccountInfoResponseArray:
    type: object
    properties:
      data:
        type: array
        items:
          $ref: '#/definitions/AccountInfo'


  AccountInfoResponse:
    type: object
    properties:
      data:
        $ref: '#/definitions/AccountInfo'


  AccountInfoRequest:
    type: object
    properties:
      data:
        $ref: '#/definitions/AccountInfo'

  jwk:
    type: object
    description: "Cryptographic key presented as JSON Web Key (JWK) as defined in RFC 7517"

  JWSUnprotectedHeader:
    type: object
    description: "JWS Unprotected Header"
    properties:
      kid:
        type: string
        description: "Key identifier"

  JWSProtectedHeader:
    type: string
    description: 'JWS Protected Header'

  serviceLink:
    type: object
    properties:
      type:
        type: string
        description: "Resource type: 'ServiceLinkRecord'"
      id:
        type: string
        description: "ID of resource"
      attributes:
        type: object
        description: 'Service Link Record as JSON Web Signature (JWS)'
        properties:
          payload:
            type: object
            description: 'JWS Payload. Base64url encoded.'
            properties:
              version:
                type: string
              link_id:
                type: string
              operator_id:
                type: string
              service_id:
                type: string
              surrogate_id:
                type: string
              operator_key:
                $ref: '#/definitions/jwk'
              cr_keys:
                description: 'JSON Web Key (JWK) Set Structure '
                type: array
                items:
                  $ref: '#/definitions/jwk'
              iat:
                type: integer
                format: int32
          signatures:
            type: array
            items:
              type: object
              properties:
                header:
                  $ref: '#/definitions/JWSUnprotectedHeader'
                protected:
                  $ref: '#/definitions/JWSProtectedHeader'
                signature:
                  type: string
                  description: "JWS Signature"


  serviceLinksResponse:
    type: object
    properties:
      data:
        type: array
        items:
          $ref: '#/definitions/serviceLink'


  serviceLinkResponse:
    type: object
    properties:
      data:
        $ref: '#/definitions/serviceLink'


  serviceLinkStatus:
    type: object
    properties:
      type:
        type: string
        description: "Resource type: 'ServiceLinkStatusRecord'"
      id:
        type: string
        description: "ID of resource"
      attributes:
        type: object
        description: 'Service Link Status Record as JSON Web Signature (JWS)'
        properties:
          header:
            $ref: '#/definitions/JWSUnprotectedHeader'
          protected:
            $ref: '#/definitions/JWSProtectedHeader'
          payload:
            type: object
            description: 'JWS Payload. Base64url encoded.'
            properties:
              version:
                type: string
              record_id:
                type: string
              surrogate_id:
                type: string
              slr_id:
                type: string
              sl_status:
                type: string
              iat:
                type: integer
                format: int32
              prev_record_id:
                type: string
          signature:
            type: string
            description: "JWS Signature"


  serviceLinkStatusesResponse:
    type: object
    properties:
      data:
        type: array
        items:
          $ref: '#/definitions/serviceLinkStatus'


  serviceLinkStatusResponse:
    type: object
    properties:
      data:
        $ref: '#/definitions/serviceLinkStatus'


  consent:
    type: object
    properties:
      type:
        type: string
        description: "Resource type: 'ConsentRecord'"
      id:
        type: string
        description: "ID of resource"
      attributes:
        type: object
        description: 'Consent Record as JSON Web Signature (JWS)'
        properties:
          header:
            $ref: '#/definitions/JWSUnprotectedHeader'
          protected:
            $ref: '#/definitions/JWSProtectedHeader'
          payload:
            type: 'object'
            description: 'Base64 encoded object containing either Consent Payload of Source Service or Consent Payload of Sink Service. For detailed descriptions of these objects check Models section.'
          signature:
            type: string
            description: "JWS Signature"


  consentsResponse:
    type: object
    properties:
      data:
        type: array
        items:
          $ref: '#/definitions/consent'

  consentStatusPayload:
    type: object
    description: 'Consent Status Record Payload'
    properties:
      version:
        type: string
      record_id:
        type: string
      surrogate_id:
        type: string
      cr_id:
        type: string
      consent_status:
        type: string
      iat:
        type: integer
        format: int32
      prev_record_id:
        type: string

  consentStatus:
    type: object
    properties:
      type:
        type: string
        description: "Resource type: 'ConsentStatusRecord'"
      id:
        type: string
        description: "ID of resource"
      attributes:
        type: object
        description: 'Consent Status Record as JSON Web Signature (JWS)'
        properties:
          header:
            $ref: '#/definitions/JWSUnprotectedHeader'
          protected:
            $ref: '#/definitions/JWSProtectedHeader'
          payload:
            $ref: '#/definitions/consentStatusPayload'
          signature:
            type: string
            description: "JWS Signature"


  consentStatusesResponse:
    type: object
    properties:
      data:
        type: array
        items:
          $ref: '#/definitions/consentStatus'


  consentStatusResponse:
    type: object
    properties:
      data:
        $ref: '#/definitions/consentStatus'

  EventLog:
    type: object
    properties:
      type:
        type: string
        description: "Resource type: 'Event'"
      id:
        type: string
        description: "ID of resource"
      attributes:
        type: object
        properties:
          action:
            type: string
            description: "HTTP Method"
          actor:
            type: string
            description: "Actor during event"
          resource:
            type: string
            description: "Resource accessed"
          timestamp:
            type: string
            description: "Timestamp of event as ISO 8601 formatted string"


  EventLogArray:
    type: object
    properties:
      data:
        type: array
        items:
          $ref: '#/definitions/EventLog'

